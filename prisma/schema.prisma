generator client { provider = "prisma-client-js" }
datasource db { provider = "postgresql"; url = env("DATABASE_URL") }

enum HealthColor { GREEN YELLOW RED GRAY }

model Portfolio {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  health    PortfolioHealthSnapshot[]
}

model PortfolioHealthSnapshot {
  id          String      @id @default(cuid())
  portfolioId String
  portfolio   Portfolio   @relation(fields: [portfolioId], references: [id], onDelete: Cascade)
  date        DateTime    @default(now())
  overall     HealthColor @default(GREEN)
  summary     String?
  @@index([portfolioId, date])
}
